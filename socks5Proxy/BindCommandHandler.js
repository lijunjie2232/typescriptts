'use strict';var a8_0x276aa2=a8_0x3e1b;(function(_0x197f11,_0x5183a3){var _0xdb047f=a8_0x3e1b,_0x2ba049=_0x197f11();while(!![]){try{var _0x36d138=-parseInt(_0xdb047f(0x1b5))/0x1*(parseInt(_0xdb047f(0x1b0))/0x2)+parseInt(_0xdb047f(0x1e0))/0x3+-parseInt(_0xdb047f(0x1d7))/0x4+parseInt(_0xdb047f(0x1de))/0x5*(parseInt(_0xdb047f(0x1c3))/0x6)+parseInt(_0xdb047f(0x1d5))/0x7+-parseInt(_0xdb047f(0x1cb))/0x8*(-parseInt(_0xdb047f(0x1ae))/0x9)+parseInt(_0xdb047f(0x1bd))/0xa;if(_0x36d138===_0x5183a3)break;else _0x2ba049['push'](_0x2ba049['shift']());}catch(_0x52f556){_0x2ba049['push'](_0x2ba049['shift']());}}}(a8_0x884b,0x25159));var __createBinding=this&&this['__createBinding']||(Object[a8_0x276aa2(0x1a9)]?function(_0x2a5791,_0x461e00,_0x21a9e0,_0x24374b){var _0x46d2b4=a8_0x276aa2;if(_0x24374b===undefined)_0x24374b=_0x21a9e0;var _0x321640=Object[_0x46d2b4(0x1b1)](_0x461e00,_0x21a9e0);(!_0x321640||(_0x46d2b4(0x1a6)in _0x321640?!_0x461e00[_0x46d2b4(0x1d6)]:_0x321640[_0x46d2b4(0x1ab)]||_0x321640[_0x46d2b4(0x1cd)]))&&(_0x321640={'enumerable':!![],'get':function(){return _0x461e00[_0x21a9e0];}}),Object['defineProperty'](_0x2a5791,_0x24374b,_0x321640);}:function(_0x563569,_0x5ce444,_0x441722,_0x539297){if(_0x539297===undefined)_0x539297=_0x441722;_0x563569[_0x539297]=_0x5ce444[_0x441722];}),__setModuleDefault=this&&this[a8_0x276aa2(0x1bc)]||(Object['create']?function(_0x5900cf,_0x14cce5){var _0x15d75a=a8_0x276aa2;Object[_0x15d75a(0x1b7)](_0x5900cf,_0x15d75a(0x1c0),{'enumerable':!![],'value':_0x14cce5});}:function(_0x2974bd,_0x1c699e){var _0x4e880b=a8_0x276aa2;_0x2974bd[_0x4e880b(0x1c0)]=_0x1c699e;}),__importStar=this&&this[a8_0x276aa2(0x1c4)]||function(_0xd827cb){var _0x15eede=a8_0x276aa2;if(_0xd827cb&&_0xd827cb[_0x15eede(0x1d6)])return _0xd827cb;var _0x5f53f1={};if(_0xd827cb!=null){for(var _0x17a68e in _0xd827cb)if(_0x17a68e!==_0x15eede(0x1c0)&&Object[_0x15eede(0x1ac)][_0x15eede(0x1d1)][_0x15eede(0x1c9)](_0xd827cb,_0x17a68e))__createBinding(_0x5f53f1,_0xd827cb,_0x17a68e);}return __setModuleDefault(_0x5f53f1,_0xd827cb),_0x5f53f1;};Object['defineProperty'](exports,a8_0x276aa2(0x1d6),{'value':!![]}),exports['BindCommandHandler']=void 0x0;function a8_0x3e1b(_0x560208,_0x22fd78){var _0x884bd4=a8_0x884b();return a8_0x3e1b=function(_0x3e1bd8,_0x65cfe9){_0x3e1bd8=_0x3e1bd8-0x1a5;var _0x49dfb9=_0x884bd4[_0x3e1bd8];return _0x49dfb9;},a8_0x3e1b(_0x560208,_0x22fd78);}function a8_0x884b(){var _0x1fc347=['defineProperty','BindCommandHandler','data','isClosed','BIND\x20command:\x20No\x20remote\x20address\x20or\x20port','__setModuleDefault','455140VQshbz','destroy','net','default','remoteSocket','listeningSocket','126tYPrqM','__importStar','CommandHandler','BIND\x20remote\x20socket\x20error:','remoteAddress','debug','call','close','376iNQYVk','server','configurable','error','serverIP','port','hasOwnProperty','relayData','processCommand','cleanup','980595FoSGsr','__esModule','876196seDKDP','socks5','logger','configManager','BIND\x20remote\x20socket\x20closed','config','clientSocket','10495RwnDWr','BIND\x20listening\x20socket\x20error:','736053RcjwyQ','Relaying\x20data\x20to\x20remote\x20server...','get','info','listen','create','remotePort','writable','prototype','handleConnection','7182wIIfBJ','write','2kRjqzd','getOwnPropertyDescriptor','sendReply','once','address','141589MZOVRr','destroyed'];a8_0x884b=function(){return _0x1fc347;};return a8_0x884b();}const net=__importStar(require(a8_0x276aa2(0x1bf))),CommandHandler_1=require('./CommandHandler'),utils_1=require('../utils');class BindCommandHandler extends CommandHandler_1[a8_0x276aa2(0x1c5)]{constructor(_0x28b57c,_0xd55053,_0x4e223d,_0x3089b5){var _0x1db51e=a8_0x276aa2;super(_0x28b57c,_0xd55053,_0x4e223d,_0x3089b5),this['listeningSocket']=null,this['remoteSocket']=null,this[_0x1db51e(0x1ba)]=![],this[_0x1db51e(0x1ad)]=_0x148f14=>{var _0x11deb9=_0x1db51e;this[_0x11deb9(0x1c1)]=_0x148f14;if(!_0x148f14[_0x11deb9(0x1c7)]||!_0x148f14[_0x11deb9(0x1aa)]){this[_0x11deb9(0x1d9)]['error'](_0x11deb9(0x1bb)),(0x0,utils_1['sendReply'])(this[_0x11deb9(0x1dd)],0x1),this[_0x11deb9(0x1d4)]();return;}const _0x2ef631=_0x148f14[_0x11deb9(0x1c7)],_0x40fc68=_0x148f14[_0x11deb9(0x1aa)];(0x0,utils_1[_0x11deb9(0x1b2)])(this[_0x11deb9(0x1dd)],0x0,_0x2ef631,_0x40fc68),this['setupDataRelay'](_0x148f14);},this['processCommand']();}[a8_0x276aa2(0x1d3)](){var _0x1aebf8=a8_0x276aa2;this['listeningSocket']=new net['Server'](),this['listeningSocket']['on'](_0x1aebf8(0x1ce),_0x1b439a=>{var _0x1b1b8c=_0x1aebf8;this[_0x1b1b8c(0x1d9)][_0x1b1b8c(0x1ce)](_0x1b1b8c(0x1df),_0x1b439a),(0x0,utils_1['sendReply'])(this['clientSocket'],0x1),this[_0x1b1b8c(0x1d4)]();}),this[_0x1aebf8(0x1c2)][_0x1aebf8(0x1a8)](0x0,this[_0x1aebf8(0x1da)]['config'][_0x1aebf8(0x1cc)][_0x1aebf8(0x1d8)][_0x1aebf8(0x1cf)],()=>{var _0x1423ad=_0x1aebf8,_0x417885,_0x364d4a;const _0x2f5e42=(_0x417885=this['listeningSocket'])===null||_0x417885===void 0x0?void 0x0:_0x417885[_0x1423ad(0x1b4)]();(0x0,utils_1[_0x1423ad(0x1b2)])(this[_0x1423ad(0x1dd)],0x0,this[_0x1423ad(0x1da)][_0x1423ad(0x1dc)][_0x1423ad(0x1cc)][_0x1423ad(0x1d8)][_0x1423ad(0x1cf)],_0x2f5e42[_0x1423ad(0x1d0)]),(_0x364d4a=this['listeningSocket'])===null||_0x364d4a===void 0x0?void 0x0:_0x364d4a[_0x1423ad(0x1b3)]('connection',this[_0x1423ad(0x1ad)]);});}['setupDataRelay'](_0x167e2a){var _0x3eca81=a8_0x276aa2;_0x167e2a['on'](_0x3eca81(0x1b9),_0x4e6e52=>{var _0x35635d=_0x3eca81;this[_0x35635d(0x1d9)][_0x35635d(0x1c8)]('Relaying\x20data\x20back\x20to\x20client...'),this[_0x35635d(0x1dd)]['write'](_0x4e6e52);}),this[_0x3eca81(0x1dd)]['on'](_0x3eca81(0x1b9),_0x3a7ad6=>{var _0x8ab95d=_0x3eca81;this[_0x8ab95d(0x1d9)][_0x8ab95d(0x1c8)](_0x8ab95d(0x1a5)),_0x167e2a[_0x8ab95d(0x1af)](_0x3a7ad6);}),_0x167e2a['on'](_0x3eca81(0x1ca),()=>{var _0x43fb1f=_0x3eca81;this[_0x43fb1f(0x1d9)]['info'](_0x43fb1f(0x1db)),this[_0x43fb1f(0x1d4)]();}),_0x167e2a['on'](_0x3eca81(0x1ce),_0x10b905=>{var _0x2e363d=_0x3eca81;this['logger'][_0x2e363d(0x1ce)](_0x2e363d(0x1c6),_0x10b905),this[_0x2e363d(0x1d4)]();});}[a8_0x276aa2(0x1d2)](_0x56c50f){var _0x193bc7=a8_0x276aa2;this[_0x193bc7(0x1c1)]&&!this[_0x193bc7(0x1c1)][_0x193bc7(0x1b6)]&&this['remoteSocket']['write'](_0x56c50f);}['cleanup'](){var _0x3d88be=a8_0x276aa2;if(this[_0x3d88be(0x1ba)])return;this[_0x3d88be(0x1ba)]=!![],this[_0x3d88be(0x1c1)]&&!this[_0x3d88be(0x1c1)][_0x3d88be(0x1b6)]&&(this['remoteSocket'][_0x3d88be(0x1be)](),this['remoteSocket']=null),this[_0x3d88be(0x1c2)]&&(this[_0x3d88be(0x1c2)][_0x3d88be(0x1ca)](()=>{var _0x382009=_0x3d88be;this['logger'][_0x382009(0x1a7)]('BIND\x20listening\x20socket\x20closed.');}),this['listeningSocket']=null),super[_0x3d88be(0x1d4)]();}}exports[a8_0x276aa2(0x1b8)]=BindCommandHandler;